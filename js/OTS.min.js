function loadCSS(t){$("<link/>",{rel:"stylesheet",type:"text/css",href:t}).appendTo("head")}function loadJS(t){$("<script>",{src:t,type:"text/javascript"}).appendTo("head")}function writeTextBoxes(){var t=$.Deferred();return betterLoadJS("http://www.skulpt.org/static/skulpt.min.js",function(){betterLoadJS("http://www.skulpt.org/static/skulpt-stdlib.js",function(){$(".codeWrapper").append('<button >Run</button><p>Output: (<a href="#"">clear</a>)</p><pre class="output" ">Press Run to see the output of the code above</pre><canvas height="400" width="400" style="border-style: solid; display: none"></canvas>'),$(".codeWrapper").each(function(t){$(this).find("button").attr("id","btn"+t),$(this).find("textarea").attr("id","code"+t),$(this).find("a").attr("id","clearoutput"+t),$(this).find(".output").attr("id","edoutput"+t),$(this).find("canvas").attr("id","mycanvas"+t)}),t.resolve()})}),t}window.OTSLoaded=!0,loadCSS("http://gerbal.github.io/css/codemirror.css");var CodeMirror=function(){function t(l,f){function y(t){$n.onDragEvent&&$n.onDragEvent(Kr,x(t))||k(t)}function C(t){return t>=0&&t<hr.size}function T(t){return d(hr,t)}function E(t,e){kr=!0;for(var n=e-t.height,r=t;r;r=r.parent)r.height+=n}function O(t){var e={line:0,ch:0};ve(e,{line:hr.size-1,ch:T(hr.size-1).text.length},oe(t),e,e),mr=!0}function $(){var t=[];return hr.iter(0,hr.size,function(e){t.push(e.text)}),t.join("\n")}function F(t){function e(e){q&&(Qn.draggable=!1),gr=!1,u(),f(),Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)<10&&(b(e),je(o.line,o.ch,!0),We())}function n(t){var e=En(t,!0);if(e&&!H(e,s)){sr||ge(),s=e,Fe(o,e),mr=!1;var r=Oe();(e.line>=r.to||e.line<r.from)&&(a=setTimeout(Kn(function(){n(t)}),150))}}function r(t){clearTimeout(a);var e=En(t);e&&Fe(o,e),b(t),We(),mr=!0,h(),u()}$e(S(t,"shiftKey"));for(var i=w(t);i!=_n;i=i.parentNode)if(i.parentNode==Zn&&i!=Jn)return;for(var i=w(t);i!=_n;i=i.parentNode)if(i.parentNode==qn)return $n.onGutterClick&&$n.onGutterClick(Kr,B(qn.childNodes,i)+Wr,t),b(t);var o=En(t);switch(M(t)){case 3:return void(Y&&!U&&zn(t));case 2:return o&&je(o.line,o.ch,!0),void setTimeout(We,20)}if(!o)return void(w(t)==Yn&&b(t));sr||ge();var l=+new Date;if(pr&&pr.time>l-400&&H(pr.pos,o))return b(t),setTimeout(We,20),tn(o.line);if(dr&&dr.time>l-400&&H(dr.pos,o))return pr={time:l,pos:o},b(t),Qe(o);dr={time:l,pos:o};var a,s=o;if($n.dragDrop&&ne&&!$n.readOnly&&!H(Lr.from,Lr.to)&&!N(o,Lr.from)&&!N(Lr.to,o)){q&&(Qn.draggable=!0);var u=A(document,"mouseup",Kn(e),!0),f=A(Yn,"drop",Kn(e),!0);return gr=!0,void(Qn.dragDrop&&Qn.dragDrop())}b(t),je(o.line,o.ch,!0);var h=A(document,"mousemove",Kn(function(t){clearTimeout(a),b(t),Z||M(t)?n(t):r(t)}),!0),u=A(document,"mouseup",Kn(r),!0)}function te(t){for(var e=w(t);e!=_n;e=e.parentNode)if(e.parentNode==qn)return b(t);var n=En(t);n&&(pr={time:+new Date,pos:n},b(t),Qe(n))}function ie(t){function e(t,e){var r=new FileReader;r.onload=function(){o[e]=r.result,++l==i&&(n=Ye(n),Kn(function(){var t=we(o.join(""),n,n);Fe(n,t)})())},r.readAsText(t)}if(!$n.onDragEvent||!$n.onDragEvent(Kr,x(t))){t.preventDefault();var n=En(t,!0),r=t.dataTransfer.files;if(n&&!$n.readOnly)if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),l=0,a=0;i>a;++a)e(r[a],a);else try{var o=t.dataTransfer.getData("Text");o&&Un(function(){var t=Lr.from,e=Lr.to;Fe(n,n),gr&&we("",t,e),Me(o),We()})}catch(t){}}}function se(t){var e=Le();if(t.dataTransfer.setData("Text",e),Y||Q){var n=document.createElement("img");n.scr="data:image/gif;base64,R0lGODdhAgACAIAAAAAAAP///ywAAAAAAgACAAACAoRRADs=",t.dataTransfer.setDragImage(n,0,0)}}function ue(t,e){if("string"==typeof t&&(t=_[t],!t))return!1;var n=cr;try{$n.readOnly&&(zr=!0),e&&(cr=null),t(Kr)}catch(r){if(r!=G)throw r;return!1}finally{cr=n,zr=!1}return!0}function fe(t){function i(){u=!0}var o=e($n.keyMap),l=o.auto;clearTimeout(Pr),l&&!r(t)&&(Pr=setTimeout(function(){e($n.keyMap)==o&&($n.keyMap=l.call?l.call(null,Kr):l)},50));var a=ae[S(t,"keyCode")],s=!1;if(null==a||t.altGraphKey)return!1;S(t,"altKey")&&(a="Alt-"+a),S(t,"ctrlKey")&&(a="Ctrl-"+a),S(t,"metaKey")&&(a="Cmd-"+a);var u=!1;return s=S(t,"shiftKey")?n("Shift-"+a,$n.extraKeys,$n.keyMap,function(t){return ue(t,!0)},i)||n(a,$n.extraKeys,$n.keyMap,function(t){return"string"==typeof t&&/^go[A-Z]/.test(t)?ue(t):void 0},i):n(a,$n.extraKeys,$n.keyMap,ue,i),u&&(s=!1),s&&(b(t),Dn(),Z&&(t.oldKeyCode=t.keyCode,t.keyCode=0)),s}function he(t,e){var r=n("'"+e+"'",$n.extraKeys,$n.keyMap,function(t){return ue(t,!0)});return r&&(b(t),Dn()),r}function ce(t){if(sr||ge(),Z&&27==t.keyCode&&(t.returnValue=!1),$r&&ze()&&($r=!1),!$n.onKeyEvent||!$n.onKeyEvent(Kr,x(t))){var e=S(t,"keyCode");$e(16==e||S(t,"shiftKey"));var n=fe(t);window.opera&&(Ur=n?e:null,!n&&88==e&&S(t,U?"metaKey":"ctrlKey")&&Me(""))}}function de(t){if($r&&ze(),!$n.onKeyEvent||!$n.onKeyEvent(Kr,x(t))){var e=S(t,"keyCode"),n=S(t,"charCode");if(window.opera&&e==Ur)return Ur=null,void b(t);if(!(window.opera&&(!t.which||t.which<10)||ee)||!fe(t)){var r=String.fromCharCode(null==n?e:n);$n.electricChars&&lr.electricChars&&$n.smartIndent&&!$n.readOnly&&lr.electricChars.indexOf(r)>-1&&setTimeout(Kn(function(){nn(Lr.to.line,"smart")}),75),he(t,r)||Ee()}}}function pe(t){$n.onKeyEvent&&$n.onKeyEvent(Kr,x(t))||16==S(t,"keyCode")&&(cr=null)}function ge(){"nocursor"!=$n.readOnly&&(sr||($n.onFocus&&$n.onFocus(Kr),sr=!0,-1==_n.className.search(/\bCodeMirror-focused\b/)&&(_n.className+=" CodeMirror-focused"),Cr||De(!0)),Te(),Dn())}function me(){sr&&($n.onBlur&&$n.onBlur(Kr),sr=!1,Sr&&Kn(function(){Sr&&(Sr(),Sr=null)})(),_n.className=_n.className.replace(" CodeMirror-focused","")),clearInterval(or),setTimeout(function(){sr||(cr=null)},150)}function ve(t,e,n,r,i){if(!zr){if(Ir){var o=[];for(hr.iter(t.line,e.line+1,function(t){o.push(t.text)}),Ir.addChange(t.line,n.length,o);Ir.done.length>$n.undoDepth;)Ir.done.shift()}Ce(t,e,n,r,i)}}function ye(t,e){if(t.length){for(var n=t.pop(),r=[],i=n.length-1;i>=0;i-=1){var o=n[i],l=[],a=o.start+o.added;hr.iter(o.start,a,function(t){l.push(t.text)}),r.push({start:o.start,added:o.old.length,old:l});var s=Ye({line:o.start+o.old.length-1,ch:I(l[l.length-1],o.old[o.old.length-1])});Ce({line:o.start,ch:0},{line:a-1,ch:T(a-1).text.length},o.old,s,s)}mr=!0,e.push(r)}}function xe(){ye(Ir.done,Ir.undone)}function be(){ye(Ir.undone,Ir.done)}function Ce(t,e,n,r,i){function o(t){return t<=Math.min(e.line,e.line+y)?t:t+y}if(!zr){var l=!1,a=Rr.length;$n.lineWrapping||hr.iter(t.line,e.line+1,function(t){return t.hidden||t.text.length!=a?void 0:(l=!0,!0)}),(t.line!=e.line||n.length>1)&&(kr=!0);var s=e.line-t.line,f=T(t.line),h=T(e.line);if(0==t.ch&&0==e.ch&&""==n[n.length-1]){var c=[],d=null;t.line?(d=T(t.line-1),d.fixMarkEnds(h)):h.fixMarkStarts();for(var p=0,g=n.length-1;g>p;++p)c.push(u.inheritMarks(n[p],d));s&&hr.remove(t.line,s,wr),c.length&&hr.insert(t.line,c)}else if(f==h)if(1==n.length)f.replace(t.ch,e.ch,n[0]);else{h=f.split(e.ch,n[n.length-1]),f.replace(t.ch,null,n[0]),f.fixMarkEnds(h);for(var c=[],p=1,g=n.length-1;g>p;++p)c.push(u.inheritMarks(n[p],f));c.push(h),hr.insert(t.line+1,c)}else if(1==n.length)f.replace(t.ch,null,n[0]),h.replace(null,e.ch,""),f.append(h),hr.remove(t.line+1,s,wr);else{var c=[];f.replace(t.ch,null,n[0]),h.replace(null,e.ch,n[n.length-1]),f.fixMarkEnds(h);for(var p=1,g=n.length-1;g>p;++p)c.push(u.inheritMarks(n[p],f));s>1&&hr.remove(t.line+1,s-1,wr),hr.insert(t.line+1,c)}if($n.lineWrapping){var m=Math.max(5,Yn.clientWidth/An()-3);hr.iter(t.line,t.line+n.length,function(t){if(!t.hidden){var e=Math.ceil(t.text.length/m)||1;e!=t.height&&E(t,e)}})}else hr.iter(t.line,t.line+n.length,function(t){var e=t.text;!t.hidden&&e.length>a&&(Rr=e,a=e.length,Ar=null,l=!1)}),l&&(Mr=!0);for(var v=[],y=n.length-s-1,p=0,x=ar.length;x>p;++p){var b=ar[p];b<t.line?v.push(b):b>e.line&&v.push(b+y)}var C=t.line+Math.min(n.length,500);Rn(t.line,C),v.push(C),ar=v,In(100),yr.push({from:t.line,to:e.line+1,diff:y});var k={from:t,to:e,text:n};if(xr){for(var w=xr;w.next;w=w.next);w.next=k}else xr=k;Ve(r,i,o(Lr.from.line),o(Lr.to.line)),Yn.clientHeight&&(Zn.style.height=hr.height*Sn()+2*Ln()+"px")}}function ke(){var t=0;Rr="",Ar=null,hr.iter(0,hr.size,function(e){var n=e.text;!e.hidden&&n.length>t&&(t=n.length,Rr=n)}),Mr=!1}function we(t,e,n){function r(r){if(N(r,e))return r;if(!N(n,r))return i;var o=r.line+t.length-(n.line-e.line)-1,l=r.ch;return r.line==n.line&&(l+=t[t.length-1].length-(n.ch-(n.line==e.line?e.ch:0))),{line:o,ch:l}}e=Ye(e),n=n?Ye(n):e,t=oe(t);var i;return Se(t,e,n,function(t){return i=t,{from:r(Lr.from),to:r(Lr.to)}}),i}function Me(t,e){Se(oe(t),Lr.from,Lr.to,function(t){return"end"==e?{from:t,to:t}:"start"==e?{from:Lr.from,to:Lr.from}:{from:Lr.from,to:t}})}function Se(t,e,n,r){var i=1==t.length?t[0].length+e.ch:t[t.length-1].length,o=r({line:e.line+t.length-1,ch:i});ve(e,n,t,o.from,o.to)}function Ae(t,e){var n=t.line,r=e.line;if(n==r)return T(n).text.slice(t.ch,e.ch);var i=[T(n).text.slice(t.ch)];return hr.iter(n+1,r,function(t){i.push(t.text)}),i.push(T(r).text.slice(0,e.ch)),i.join("\n")}function Le(){return Ae(Lr.from,Lr.to)}function Te(){$r||ur.set($n.pollInterval,function(){Bn(),ze(),sr&&Te(),Pn()})}function Ee(){function t(){Bn();var n=ze();n||e?($r=!1,Te()):(e=!0,ur.set(60,t)),Pn()}var e=!1;$r=!0,ur.set(20,t)}function ze(){if(Cr||!sr||le(Gn)||$n.readOnly)return!1;var t=Gn.value;if(t==Fr)return!1;cr=null;for(var e=0,n=Math.min(Fr.length,t.length);n>e&&Fr[e]==t[e];)++e;return e<Fr.length?Lr.from={line:Lr.from.line,ch:Lr.from.ch-(Fr.length-e)}:Er&&H(Lr.from,Lr.to)&&(Lr.to={line:Lr.to.line,ch:Math.min(T(Lr.to.line).text.length,Lr.to.ch+(t.length-e))}),Me(t.slice(e),"end"),t.length>1e3?Gn.value=Fr="":Fr=t,!0}function De(t){H(Lr.from,Lr.to)?t&&(Fr=Gn.value=""):(Fr="",Gn.value=Le(),W(Gn))}function We(){"nocursor"!=$n.readOnly&&Gn.focus()}function He(){if(er.getBoundingClientRect){var t=er.getBoundingClientRect();if(!Z||t.top!=t.bottom){var e=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(t.top<0||t.bottom>e)&&er.scrollIntoView()}}}function Ne(){var t=kn(Lr.inverted?Lr.from:Lr.to),e=$n.lineWrapping?Math.min(t.x,Qn.offsetWidth):t.x;return Re(e,t.y,e,t.yBot)}function Re(t,e,n,r){var i=Tn(),o=Ln();e+=o,r+=o,t+=i,n+=i;var l=Yn.clientHeight,a=Yn.scrollTop,s=!1,u=!0;a>e?(Yn.scrollTop=Math.max(0,e),s=!0):r>a+l&&(Yn.scrollTop=r-l,s=!0);var f=Yn.clientWidth,h=Yn.scrollLeft,c=$n.fixedGutter?Xn.clientWidth:0,d=c+i+10>t;return h+c>t||d?(d&&(t=0),Yn.scrollLeft=Math.max(0,t-10-c),s=!0):n>f+h-3&&(Yn.scrollLeft=n+10-f,s=!0,n>Zn.clientWidth&&(u=!1)),s&&$n.onScroll&&$n.onScroll(Kr),u}function Oe(){var t=Sn(),e=Yn.scrollTop-Ln(),n=Math.max(0,Math.floor(e/t)),r=Math.ceil((e+Yn.clientHeight)/t);return{from:g(hr,n),to:g(hr,r)}}function Ie(t,e){function n(){Ar=Yn.clientWidth;var t=rr.firstChild,e=!1;return hr.iter(Wr,Hr,function(n){if(!n.hidden){var r=Math.round(t.offsetHeight/f)||1;n.height!=r&&(E(n,r),kr=e=!0)}t=t.nextSibling}),e&&(Zn.style.height=hr.height*f+2*Ln()+"px"),e}if(!Yn.clientWidth)return void(Wr=Hr=Dr=0);var r=Oe();if(!(t!==!0&&0==t.length&&r.from>Wr&&r.to<Hr)){var i=Math.max(r.from-100,0),o=Math.min(hr.size,r.to+100);i>Wr&&20>i-Wr&&(i=Wr),Hr>o&&20>Hr-o&&(o=Math.min(hr.size,Hr));for(var l=t===!0?[]:Be([{from:Wr,to:Hr,domStart:0}],t),a=0,s=0;s<l.length;++s){var u=l[s];u.from<i&&(u.domStart+=i-u.from,u.from=i),u.to>o&&(u.to=o),u.from>=u.to?l.splice(s--,1):a+=u.to-u.from}if(a!=o-i||i!=Wr||o!=Hr){l.sort(function(t,e){return t.domStart-e.domStart});var f=Sn(),h=Xn.style.display;rr.style.display="none",Pe(i,o,l),rr.style.display=Xn.style.display="";var c=i!=Wr||o!=Hr||Nr!=Yn.clientHeight+f;if(c&&(Nr=Yn.clientHeight+f),Wr=i,Hr=o,Dr=m(hr,i),Jn.style.top=Dr*f+"px",Yn.clientHeight&&(Zn.style.height=hr.height*f+2*Ln()+"px"),rr.childNodes.length!=Hr-Wr)throw new Error("BAD PATCH! "+JSON.stringify(l)+" size="+(Hr-Wr)+" nodes="+rr.childNodes.length);return $n.lineWrapping?n():(null==Ar&&(Ar=bn(Rr)),Ar>Yn.clientWidth?(Qn.style.width=Ar+"px",Zn.style.width="",Zn.style.width=Yn.scrollWidth+"px"):Qn.style.width=Zn.style.width=""),Xn.style.display=h,(c||kr)&&Ke()&&$n.lineWrapping&&n()&&Ke(),Ue(),!e&&$n.onUpdate&&$n.onUpdate(Kr),!0}}}function Be(t,e){for(var n=0,r=e.length||0;r>n;++n){for(var i=e[n],o=[],l=i.diff||0,a=0,s=t.length;s>a;++a){var u=t[a];i.to<=u.from&&i.diff?o.push({from:u.from+l,to:u.to+l,domStart:u.domStart}):i.to<=u.from||i.from>=u.to?o.push(u):(i.from>u.from&&o.push({from:u.from,to:i.from,domStart:u.domStart}),i.to<u.to&&o.push({from:i.to+l,to:u.to+l,domStart:u.domStart+(i.to-u.from)}))}t=o}return t}function Pe(t,e,n){function r(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}if(n.length){for(var i=0,o=rr.firstChild,l=0;l<n.length;++l){for(var a=n[l];a.domStart>i;)o=r(o),i++;for(var s=0,u=a.to-a.from;u>s;++s)o=o.nextSibling,i++}for(;o;)o=r(o)}else rr.innerHTML="";var f=n.shift(),o=rr.firstChild,s=t,h=document.createElement("div");hr.iter(t,e,function(t){if(f&&f.to==s&&(f=n.shift()),!f||f.from>s){if(t.hidden)var e=h.innerHTML="<pre></pre>";else{var e="<pre"+(t.className?' class="'+t.className+'"':"")+">"+t.getHTML(an)+"</pre>";t.bgClassName&&(e='<div style="position: relative"><pre class="'+t.bgClassName+'" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2">&#160;</pre>'+e+"</div>")}h.innerHTML=e,rr.insertBefore(h.firstChild,o)}else o=o.nextSibling;++s})}function Ke(){if($n.gutter||$n.lineNumbers){var t=Jn.offsetHeight,e=Yn.clientHeight;Xn.style.height=(2>t-e?e:t)+"px";var n,r=[],i=Wr;if(hr.iter(Wr,Math.max(Hr,Wr+1),function(t){if(t.hidden)r.push("<pre></pre>");else{var e=t.gutterMarker,o=$n.lineNumbers?i+$n.firstLineNumber:null;e&&e.text?o=e.text.replace("%N%",null!=o?o:""):null==o&&(o=" "),r.push(e&&e.style?'<pre class="'+e.style+'">':"<pre>",o);for(var l=1;l<t.height;++l)r.push("<br/>&#160;");r.push("</pre>"),e||(n=i)}++i}),Xn.style.display="none",qn.innerHTML=r.join(""),null!=n){for(var o=qn.childNodes[n-Wr],l=String(hr.size).length,a=D(o),s="";a.length+s.length<l;)s+=" ";s&&o.insertBefore(document.createTextNode(s),o.firstChild)}Xn.style.display="";var u=Math.abs((parseInt(Qn.style.marginLeft)||0)-Xn.offsetWidth)>2;return Qn.style.marginLeft=Xn.offsetWidth+"px",kr=!1,u}}function Ue(){function t(t,e,n,r){var i=X?"width: "+(n?f-n-t:f)+"px":"right: "+n+"px";u+='<div class="CodeMirror-selected" style="position: absolute; left: '+t+"px; top: "+e+"px; "+i+"; height: "+r+'px"></div>'}var e=H(Lr.from,Lr.to),n=kn(Lr.from,!0),r=e?n:kn(Lr.to,!0),i=Lr.inverted?n:r,o=Sn(),l=z(_n),a=z(rr);if(jn.style.top=Math.max(0,Math.min(Yn.offsetHeight,i.y+a.top-l.top))+"px",jn.style.left=Math.max(0,Math.min(Yn.offsetWidth,i.x+a.left-l.left))+"px",e)er.style.top=i.y+"px",er.style.left=($n.lineWrapping?Math.min(i.x,Qn.offsetWidth):i.x)+"px",er.style.display="",nr.style.display="none";else{var s=n.y==r.y,u="",f=Qn.clientWidth||Qn.offsetWidth,h=Qn.clientHeight||Qn.offsetHeight;if(Lr.from.ch&&n.y>=0){var c=s?f-r.x:0;t(n.x,n.y,c,o)}var d=Math.max(0,n.y+(Lr.from.ch?o:0)),p=Math.min(r.y,h)-d;p>.2*o&&t(0,d,0,p),s&&Lr.from.ch||!(r.y<h-.5*o)||t(0,r.y,f-r.x,o),nr.innerHTML=u,er.style.display="none",nr.style.display=""}}function $e(t){cr=t?cr||(Lr.inverted?Lr.to:Lr.from):null}function Fe(t,e){var n=cr&&Ye(cr);n&&(N(n,t)?t=n:N(e,n)&&(e=n)),Ve(t,e),vr=!0}function Ve(t,e,n,r){if(Vr=null,null==n&&(n=Lr.from.line,r=Lr.to.line),!H(Lr.from,t)||!H(Lr.to,e)){if(N(e,t)){var i=e;e=t,t=i}if(t.line!=n){var o=_e(t,n,Lr.from.ch);o?t=o:yn(t.line,!1)}if(e.line!=r&&(e=_e(e,r,Lr.to.ch)),H(t,e)?Lr.inverted=!1:H(t,Lr.to)?Lr.inverted=!1:H(e,Lr.from)&&(Lr.inverted=!0),$n.autoClearEmptyLines&&H(Lr.from,Lr.to)){var l=Lr.inverted?t:e;if(l.line!=Lr.from.line&&Lr.from.line<hr.size){var a=T(Lr.from.line);/^\s+$/.test(a.text)&&setTimeout(Kn(function(){if(a.parent&&/^\s+$/.test(a.text)){var t=p(a);we("",{line:t,ch:0},{line:t,ch:a.text.length})}},10))}}Lr.from=t,Lr.to=e,br=!0}}function _e(t,e,n){function r(e){for(var r=t.line+e,i=1==e?hr.size:-1;r!=i;){var l=T(r);if(!l.hidden){var a=t.ch;return(o||a>n||a>l.text.length)&&(a=l.text.length),{line:r,ch:a}}r+=e}}var i=T(t.line),o=t.ch==i.text.length&&t.ch!=n;return i.hidden?t.line>=e?r(1)||r(-1):r(-1)||r(1):t}function je(t,e,n){var r=Ye({line:t,ch:e||0});(n?Fe:Ve)(r,r)}function Ge(t){return Math.max(0,Math.min(t,hr.size-1))}function Ye(t){if(t.line<0)return{line:0,ch:0};if(t.line>=hr.size)return{line:hr.size-1,ch:T(hr.size-1).text.length};var e=t.ch,n=T(t.line).text.length;return null==e||e>n?{line:t.line,ch:n}:0>e?{line:t.line,ch:0}:t}function Ze(t,e){function n(){for(var e=o+t,n=0>t?-1:hr.size;e!=n;e+=t){var r=T(e);if(!r.hidden)return o=e,a=r,!0}}function r(e){if(l==(0>t?0:a.text.length)){if(e||!n())return!1;l=0>t?a.text.length:0}else l+=t;return!0}var i=Lr.inverted?Lr.from:Lr.to,o=i.line,l=i.ch,a=T(o);if("char"==e)r();else if("column"==e)r(!0);else if("word"==e)for(var s=!1;!(0>t)||r();){if(P(a.text.charAt(l)))s=!0;else if(s){0>t&&(t=1,r());break}if(t>0&&!r())break}return{line:o,ch:l}}function Je(t,e){var n=0>t?Lr.from:Lr.to;(cr||H(Lr.from,Lr.to))&&(n=Ze(t,e)),je(n.line,n.ch,!0)}function Xe(t,e){H(Lr.from,Lr.to)?0>t?we("",Ze(t,e),Lr.to):we("",Lr.from,Ze(t,e)):we("",Lr.from,Lr.to),vr=!0}function qe(t,e){var n=0,r=kn(Lr.inverted?Lr.from:Lr.to,!0);null!=Vr&&(r.x=Vr),"page"==e?n=Math.min(Yn.clientHeight,window.innerHeight||document.documentElement.clientHeight):"line"==e&&(n=Sn());var i=wn(r.x,r.y+n*t+2);"page"==e&&(Yn.scrollTop+=kn(i,!0).y-r.y),je(i.line,i.ch,!0),Vr=r.x}function Qe(t){for(var e=T(t.line).text,n=t.ch,r=t.ch;n>0&&P(e.charAt(n-1));)--n;for(;r<e.length&&P(e.charAt(r));)++r;Fe({line:t.line,ch:n},{line:t.line,ch:r})}function tn(t){Fe({line:t,ch:0},Ye({line:t+1,ch:0}))}function en(t){if(H(Lr.from,Lr.to))return nn(Lr.from.line,t);for(var e=Lr.to.line-(Lr.to.ch?0:1),n=Lr.from.line;e>=n;++n)nn(n,t)}function nn(t,e){if(e||(e="add"),"smart"==e)if(lr.indent)var n=Nn(t);else e="prev";var r,i=T(t),o=i.indentation($n.tabSize),l=i.text.match(/^\s*/)[0];"prev"==e?r=t?T(t-1).indentation($n.tabSize):0:"smart"==e?r=lr.indent(n,i.text.slice(l.length),i.text):"add"==e?r=o+$n.indentUnit:"subtract"==e&&(r=o-$n.indentUnit),r=Math.max(0,r);var a=r-o;if(a){var s="",u=0;if($n.indentWithTabs)for(var f=Math.floor(r/$n.tabSize);f;--f)u+=$n.tabSize,s+="	";for(;r>u;)++u,s+=" "}else{if(Lr.from.line!=t&&Lr.to.line!=t)return;var s=l}we(s,{line:t,ch:0},{line:t,ch:l.length})}function rn(){lr=t.getMode($n,$n.mode),hr.iter(0,hr.size,function(t){t.stateAfter=null}),ar=[0],In()}function on(){var t=$n.gutter||$n.lineNumbers;Xn.style.display=t?"":"none",t?kr=!0:rr.parentNode.style.marginLeft=0}function ln(){if($n.lineWrapping){_n.className+=" CodeMirror-wrap";var t=Yn.clientWidth/An()-3;hr.iter(0,hr.size,function(e){if(!e.hidden){var n=Math.ceil(e.text.length/t)||1;1!=n&&E(e,n)}}),Qn.style.width=Zn.style.width=""}else _n.className=_n.className.replace(" CodeMirror-wrap",""),Ar=null,Rr="",hr.iter(0,hr.size,function(t){1==t.height||t.hidden||E(t,1),t.text.length>Rr.length&&(Rr=t.text)});yr.push({from:0,to:hr.size})}function an(t){var e=$n.tabSize-t%$n.tabSize,n=Or[e];if(n)return n;for(var r='<span class="cm-tab">',i=0;e>i;++i)r+=" ";return Or[e]={html:r+"</span>",width:e}}function sn(){Yn.className=Yn.className.replace(/\s*cm-s-\S+/g,"")+$n.theme.replace(/(^|\s)\s*/g," cm-s-")}function un(){var t=j[$n.keyMap].style;_n.className=_n.className.replace(/\s*cm-keymap-\S+/g,"")+(t?" cm-keymap-"+t:"")}function fn(){this.set=[]}function hn(t,e,n){function r(t,e,n,r){T(t).addMark(new a(e,n,r,i))}t=Ye(t),e=Ye(e);var i=new fn;if(!N(t,e))return i;if(t.line==e.line)r(t.line,t.ch,e.ch,n);else{r(t.line,t.ch,null,n);for(var o=t.line+1,l=e.line;l>o;++o)r(o,null,null,n);r(e.line,null,e.ch,n)}return yr.push({from:t.line,to:e.line+1}),i}function cn(t){t=Ye(t);var e=new s(t.ch);return T(t.line).addMark(e),e}function dn(t){t=Ye(t);var e=[],n=T(t.line).marked;if(!n)return e;for(var r=0,i=n.length;i>r;++r){var o=n[r];(null==o.from||o.from<=t.ch)&&(null==o.to||o.to>=t.ch)&&e.push(o.marker||o)}return e}function pn(t,e,n){return"number"==typeof t&&(t=T(Ge(t))),t.gutterMarker={text:e,style:n},kr=!0,t}function gn(t){"number"==typeof t&&(t=T(Ge(t))),t.gutterMarker=null,kr=!0}function mn(t,e){var n=t,r=t;return"number"==typeof t?r=T(Ge(t)):n=p(t),null==n?null:e(r,n)?(yr.push({from:n,to:n+1}),r):null}function vn(t,e,n){return mn(t,function(t){return t.className!=e||t.bgClassName!=n?(t.className=e,t.bgClassName=n,!0):void 0})}function yn(t,e){return mn(t,function(t,n){if(t.hidden!=e){if(t.hidden=e,!$n.lineWrapping){var r=t.text;e&&r.length==Rr.length?Mr=!0:!e&&r.length>Rr.length&&(Rr=r,Ar=null,Mr=!1)}E(t,e?0:1);var i=Lr.from.line,o=Lr.to.line;if(e&&(i==n||o==n)){var l=i==n?_e({line:i,ch:0},i,0):Lr.from,a=o==n?_e({line:o,ch:0},o,0):Lr.to;if(!a)return;Ve(l,a)}return kr=!0}})}function xn(t){if("number"==typeof t){if(!C(t))return null;var e=t;if(t=T(t),!t)return null}else{var e=p(t);if(null==e)return null}var n=t.gutterMarker;return{line:e,handle:t,text:t.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:t.className,bgClass:t.bgClassName}}function bn(t){return tr.innerHTML="<pre><span>x</span></pre>",tr.firstChild.firstChild.firstChild.nodeValue=t,tr.firstChild.firstChild.offsetWidth||10}function Cn(t,e){if(0==e)return{top:0,left:0};var n=$n.lineWrapping&&e<t.text.length&&re.test(t.text.slice(e-1,e+1));tr.innerHTML="<pre>"+t.getHTML(an,e,Zr,n)+"</pre>";var r=document.getElementById(Zr),i=r.offsetTop,o=r.offsetLeft;if(Z&&0==i&&0==o){var l=document.createElement("span");l.innerHTML="x",r.parentNode.insertBefore(l,r.nextSibling),i=l.offsetTop}return{top:i,left:o}}function kn(t,e){var n,r=Sn(),i=r*(m(hr,t.line)-(e?Dr:0));if(0==t.ch)n=0;else{var o=Cn(T(t.line),t.ch);n=o.left,$n.lineWrapping&&(i+=Math.max(0,o.top))}return{x:n,y:i,yBot:i+r}}function wn(t,e){function n(t){var e=Cn(a,t);if(u){var n=Math.round(e.top/r);return Math.max(0,e.left+(n-f)*Yn.clientWidth)}return e.left}0>e&&(e=0);var r=Sn(),i=An(),o=Dr+Math.floor(e/r),l=g(hr,o);if(l>=hr.size)return{line:hr.size-1,ch:T(hr.size-1).text.length};var a=T(l),s=a.text,u=$n.lineWrapping,f=u?o-m(hr,l):0;if(0>=t&&0==f)return{line:l,ch:0};for(var h,c=0,d=0,p=s.length,v=Math.min(p,Math.ceil((t+f*Yn.clientWidth*.9)/i));;){var y=n(v);if(!(t>=y&&p>v)){h=y,p=v;break}v=Math.min(p,Math.ceil(1.2*v))}if(t>h)return{line:l,ch:p};for(v=Math.floor(.8*p),y=n(v),t>y&&(c=v,d=y);;){if(1>=p-c)return{line:l,ch:h-t>t-d?c:p};var x=Math.ceil((c+p)/2),b=n(x);b>t?(p=x,h=b):(c=x,d=b)}}function Mn(t){var e=kn(t,!0),n=z(Qn);return{x:n.left+e.x,y:n.top+e.y,yBot:n.top+e.yBot}}function Sn(){if(null==Gr){Gr="<pre>";for(var t=0;49>t;++t)Gr+="x<br/>";Gr+="x</pre>"}var e=rr.clientHeight;return e==jr?_r:(jr=e,tr.innerHTML=Gr,_r=tr.firstChild.offsetHeight/50||1,tr.innerHTML="",_r)}function An(){return Yn.clientWidth==Jr?Yr:(Jr=Yn.clientWidth,Yr=bn("x"))}function Ln(){return Qn.offsetTop}function Tn(){return Qn.offsetLeft}function En(t,e){var n,r,i=z(Yn,!0);try{n=t.clientX,r=t.clientY}catch(t){return null}if(!e&&(n-i.left>Yn.clientWidth||r-i.top>Yn.clientHeight))return null;var o=z(Qn,!0);return wn(n-o.left,r-o.top)}function zn(t){function e(){var t=oe(Gn.value).join("\n");t!=o&&Kn(Me)(t,"end"),jn.style.position="relative",Gn.style.cssText=i,J&&(Yn.scrollTop=r),Cr=!1,De(!0),Te()}var n=En(t),r=Yn.scrollTop;if(n&&!window.opera){(H(Lr.from,Lr.to)||N(n,Lr.from)||!N(n,Lr.to))&&Kn(je)(n.line,n.ch);var i=Gn.style.cssText;jn.style.position="absolute",Gn.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Cr=!0;var o=Gn.value=Le();if(We(),W(Gn),Y){k(t);var l=A(window,"mouseup",function(){l(),setTimeout(e,20)},!0)}else setTimeout(e,50)}}function Dn(){clearInterval(or);var t=!0;er.style.visibility="",or=setInterval(function(){er.style.visibility=(t=!t)?"":"hidden"},650)}function Wn(t){function e(t,e,n){if(t.text)for(var r,i=t.styles,o=l?0:t.text.length-1,s=l?0:i.length-2,u=l?i.length:-2;s!=u;s+=2*a){var f=i[s];if(null==i[s+1]||i[s+1]==c){for(var h=l?0:f.length-1,g=l?f.length:-1;h!=g;h+=a,o+=a)if(o>=e&&n>o&&p.test(r=f.charAt(h))){var m=Xr[r];if(">"==m.charAt(1)==l)d.push(r);else{if(d.pop()!=m.charAt(0))return{pos:o,match:!1};if(!d.length)return{pos:o,match:!0}}}}else o+=a*f.length}}var n=Lr.inverted?Lr.from:Lr.to,r=T(n.line),i=n.ch-1,o=i>=0&&Xr[r.text.charAt(i)]||Xr[r.text.charAt(++i)];if(o){for(var l=(o.charAt(0),">"==o.charAt(1)),a=l?1:-1,s=r.styles,u=i+1,f=0,h=s.length;h>f;f+=2)if((u-=s[f].length)<=0){var c=s[f+1];break}for(var d=[r.text.charAt(i)],p=/[(){}[\]]/,f=n.line,h=l?Math.min(f+100,hr.size):Math.max(-1,f-100);f!=h;f+=a){var r=T(f),g=f==n.line,m=e(r,g&&l?i+1:0,g&&!l?i:r.text.length);if(m)break}m||(m={pos:null,match:!1});var c=m.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",v=hn({line:n.line,ch:i},{line:n.line,ch:i+1},c),y=null!=m.pos&&hn({line:f,ch:m.pos},{line:f,ch:m.pos+1},c),x=Kn(function(){v.clear(),y&&y.clear()});t?setTimeout(x,800):Sr=x}}function Hn(t){for(var e,n,r=t,i=t-40;r>i;--r){if(0==r)return 0;var o=T(r-1);if(o.stateAfter)return r;var l=o.indentation($n.tabSize);(null==n||e>l)&&(n=r-1,e=l)}return n}function Nn(t){var e=Hn(t),n=e&&T(e-1).stateAfter;return n=n?i(lr,n):o(lr),hr.iter(e,t,function(t){t.highlight(lr,n,$n.tabSize),t.stateAfter=i(lr,n)}),t>e&&yr.push({from:e,to:t}),t<hr.size&&!T(t).stateAfter&&ar.push(t),n}function Rn(t,e){var n=Nn(t);hr.iter(t,e,function(t){t.highlight(lr,n,$n.tabSize),t.stateAfter=i(lr,n)})}function On(){for(var t=+new Date+$n.workTime,e=ar.length;ar.length;){if(T(Wr).stateAfter)var n=ar.pop();else var n=Wr;if(!(n>=hr.size)){var r=Hn(n),l=r&&T(r-1).stateAfter;l=l?i(lr,l):o(lr);var a=0,s=lr.compareStates,u=!1,f=r,h=!1;if(hr.iter(f,hr.size,function(e){var r=e.stateAfter;if(+new Date>t)return ar.push(f),In($n.workDelay),u&&yr.push({from:n,to:f+1}),h=!0;var o=e.highlight(lr,l,$n.tabSize);o&&(u=!0),e.stateAfter=i(lr,l);var c=null;if(s){var d=r&&s(r,l);d!=G&&(c=!!d)}return null==c&&(o===!1&&r?++a>3&&(!lr.indent||lr.indent(r,"")==lr.indent(l,""))&&(c=!0):a=0),c?!0:void++f}),h)return;u&&yr.push({from:n,to:f+1})}}e&&$n.onHighlightComplete&&$n.onHighlightComplete(Kr)}function In(t){ar.length&&fr.set(t,Kn(On))}function Bn(){mr=vr=xr=null,yr=[],br=!1,wr=[]}function Pn(){var t,e=!1;Mr&&ke(),br&&(e=!Ne()),yr.length?t=Ie(yr,!0):(br&&Ue(),kr&&Ke()),e&&Ne(),br&&(He(),Dn()),sr&&!Cr&&(mr===!0||mr!==!1&&br)&&De(vr),br&&$n.matchBrackets&&setTimeout(Kn(function(){Sr&&(Sr(),Sr=null),H(Lr.from,Lr.to)&&Wn(!1)}),20);var n=xr,r=wr;br&&$n.onCursorActivity&&$n.onCursorActivity(Kr),n&&$n.onChange&&Kr&&$n.onChange(Kr,n);for(var i=0;i<r.length;++i)r[i](Kr);t&&$n.onUpdate&&$n.onUpdate(Kr)}function Kn(t){return function(){qr++||Bn();try{var e=t.apply(this,arguments)}finally{--qr||Pn()}return e}}function Un(t){Ir.startCompound();try{return t()}finally{Ir.endCompound()}}var $n={},Fn=t.defaults;for(var Vn in Fn)Fn.hasOwnProperty(Vn)&&($n[Vn]=(f&&f.hasOwnProperty(Vn)?f:Fn)[Vn]);var _n=document.createElement("div");_n.className="CodeMirror"+($n.lineWrapping?" CodeMirror-wrap":""),_n.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px; height: 1em" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative; z-index: 0"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden;"></div><pre class="CodeMirror-cursor">&#160;</pre><div style="position: relative; z-index: -1"></div><div></div></div></div></div></div></div>',l.appendChild?l.appendChild(_n):l(_n);var jn=_n.firstChild,Gn=jn.firstChild,Yn=_n.lastChild,Zn=Yn.firstChild,Jn=Zn.firstChild,Xn=Jn.firstChild,qn=Xn.firstChild,Qn=Xn.nextSibling.firstChild,tr=Qn.firstChild,er=tr.nextSibling,nr=er.nextSibling,rr=nr.nextSibling;sn(),un(),K&&(Gn.style.width="0px"),q||(Qn.draggable=!0),Qn.style.outline="none",null!=$n.tabindex&&(Gn.tabIndex=$n.tabindex),$n.autofocus&&We(),$n.gutter||$n.lineNumbers||(Xn.style.display="none"),ee&&(jn.style.height="1px",jn.style.position="absolute");try{bn("x")}catch(ir){throw ir.message.match(/runtime/i)&&(ir=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),ir}var or,lr,ar,sr,ur=new L,fr=new L,hr=new c([new h([new u("")])]);rn();var cr,dr,pr,gr,mr,vr,yr,xr,br,Cr,kr,wr,Mr,Sr,Ar,Lr={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},Tr=0,Er=!1,zr=!1,Dr=0,Wr=0,Hr=0,Nr=0,Rr="",Or={};Kn(function(){O($n.value||""),mr=!1})();var Ir=new v;A(Yn,"mousedown",Kn(F)),A(Yn,"dblclick",Kn(te)),A(Qn,"selectstart",b),Y||A(Yn,"contextmenu",zn),A(Yn,"scroll",function(){Tr=Yn.scrollTop,Ie([]),$n.fixedGutter&&(Xn.style.left=Yn.scrollLeft+"px"),$n.onScroll&&$n.onScroll(Kr)}),A(window,"resize",function(){Ie(!0)}),A(Gn,"keyup",Kn(pe)),A(Gn,"input",Ee),A(Gn,"keydown",Kn(ce)),A(Gn,"keypress",Kn(de)),A(Gn,"focus",ge),A(Gn,"blur",me),$n.dragDrop&&(A(Qn,"dragstart",se),A(Yn,"dragenter",y),A(Yn,"dragover",y),A(Yn,"drop",Kn(ie))),A(Yn,"paste",function(){We(),Ee()}),A(Gn,"paste",Ee),A(Gn,"cut",Kn(function(){$n.readOnly||Me("")})),ee&&A(Zn,"mouseup",function(){document.activeElement==Gn&&Gn.blur(),We()});var Br;try{Br=document.activeElement==Gn}catch(ir){}Br||$n.autofocus?setTimeout(ge,20):me();var Pr,Kr=_n.CodeMirror={getValue:$,setValue:Kn(O),getSelection:Le,replaceSelection:Kn(Me),focus:function(){window.focus(),We(),ge(),Ee()},setOption:function(t,e){var n=$n[t];$n[t]=e,"mode"==t||"indentUnit"==t?rn():"readOnly"==t&&"nocursor"==e?(me(),Gn.blur()):"readOnly"!=t||e?"theme"==t?sn():"lineWrapping"==t&&n!=e?Kn(ln)():"tabSize"==t?Ie(!0):"keyMap"==t&&un():De(!0),("lineNumbers"==t||"gutter"==t||"firstLineNumber"==t||"theme"==t)&&(on(),Ie(!0))},getOption:function(t){return $n[t]},undo:Kn(xe),redo:Kn(be),indentLine:Kn(function(t,e){"string"!=typeof e&&(e=null==e?$n.smartIndent?"smart":"prev":e?"add":"subtract"),C(t)&&nn(t,e)}),indentSelection:Kn(en),historySize:function(){return{undo:Ir.done.length,redo:Ir.undone.length}},clearHistory:function(){Ir=new v},matchBrackets:Kn(function(){Wn(!0)}),getTokenAt:Kn(function(t){return t=Ye(t),T(t.line).getTokenAt(lr,Nn(t.line),t.ch)}),getStateAfter:function(t){return t=Ge(null==t?hr.size-1:t),Nn(t+1)},cursorCoords:function(t,e){return null==t&&(t=Lr.inverted),this.charCoords(t?Lr.from:Lr.to,e)},charCoords:function(t,e){return t=Ye(t),"local"==e?kn(t,!1):"div"==e?kn(t,!0):Mn(t)},coordsChar:function(t){var e=z(Qn);return wn(t.x-e.left,t.y-e.top)},markText:Kn(hn),setBookmark:cn,findMarksAt:dn,setMarker:Kn(pn),clearMarker:Kn(gn),setLineClass:Kn(vn),hideLine:Kn(function(t){return yn(t,!0)}),showLine:Kn(function(t){return yn(t,!1)}),onDeleteLine:function(t,e){if("number"==typeof t){if(!C(t))return null;t=T(t)}return(t.handlers||(t.handlers=[])).push(e),t},lineInfo:xn,addWidget:function(t,e,n,r,i){t=kn(Ye(t));var o=t.yBot,l=t.x;if(e.style.position="absolute",Zn.appendChild(e),"over"==r)o=t.y;else if("near"==r){var a=Math.max(Yn.offsetHeight,hr.height*Sn()),s=Math.max(Zn.clientWidth,Qn.clientWidth)-Tn();t.yBot+e.offsetHeight>a&&t.y>e.offsetHeight&&(o=t.y-e.offsetHeight),l+e.offsetWidth>s&&(l=s-e.offsetWidth)}e.style.top=o+Ln()+"px",e.style.left=e.style.right="","right"==i?(l=Zn.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?l=0:"middle"==i&&(l=(Zn.clientWidth-e.offsetWidth)/2),e.style.left=l+Tn()+"px"),n&&Re(l,o,l+e.offsetWidth,o+e.offsetHeight)},lineCount:function(){return hr.size},clipPos:Ye,getCursor:function(t){return null==t&&(t=Lr.inverted),R(t?Lr.from:Lr.to)},somethingSelected:function(){return!H(Lr.from,Lr.to)},setCursor:Kn(function(t,e,n){null==e&&"number"==typeof t.line?je(t.line,t.ch,n):je(t,e,n)}),setSelection:Kn(function(t,e,n){(n?Fe:Ve)(Ye(t),Ye(e||t))}),getLine:function(t){return C(t)?T(t).text:void 0
},getLineHandle:function(t){return C(t)?T(t):void 0},setLine:Kn(function(t,e){C(t)&&we(e,{line:t,ch:0},{line:t,ch:T(t).text.length})}),removeLine:Kn(function(t){C(t)&&we("",{line:t,ch:0},Ye({line:t+1,ch:0}))}),replaceRange:Kn(we),getRange:function(t,e){return Ae(Ye(t),Ye(e))},triggerOnKeyDown:Kn(ce),execCommand:function(t){return _[t](Kr)},moveH:Kn(Je),deleteH:Kn(Xe),moveV:Kn(qe),toggleOverwrite:function(){Er?(Er=!1,er.className=er.className.replace(" CodeMirror-overwrite","")):(Er=!0,er.className+=" CodeMirror-overwrite")},posFromIndex:function(t){var e,n=0;return hr.iter(0,hr.size,function(r){var i=r.text.length+1;return i>t?(e=t,!0):(t-=i,void++n)}),Ye({line:n,ch:e})},indexFromPos:function(t){if(t.line<0||t.ch<0)return 0;var e=t.ch;return hr.iter(0,t.line,function(t){e+=t.text.length+1}),e},scrollTo:function(t,e){null!=t&&(Yn.scrollLeft=t),null!=e&&(Yn.scrollTop=e),Ie([])},operation:function(t){return Kn(t)()},compoundChange:function(t){return Un(t)},refresh:function(){Ie(!0),Yn.scrollHeight>Tr&&(Yn.scrollTop=Tr)},getInputField:function(){return Gn},getWrapperElement:function(){return _n},getScrollerElement:function(){return Yn},getGutterElement:function(){return Xn}},Ur=null,$r=!1,Fr="",Vr=null;fn.prototype.clear=Kn(function(){for(var t=1/0,e=-1/0,n=0,r=this.set.length;r>n;++n){var i=this.set[n],o=i.marked;if(o&&i.parent){var l=p(i);t=Math.min(t,l),e=Math.max(e,l);for(var a=0;a<o.length;++a)o[a].marker==this&&o.splice(a--,1)}}1/0!=t&&yr.push({from:t,to:e+1})}),fn.prototype.find=function(){for(var t,e,n=0,r=this.set.length;r>n;++n)for(var i=this.set[n],o=i.marked,l=0;l<o.length;++l){var a=o[l];if(a.marker==this&&(null!=a.from||null!=a.to)){var s=p(i);null!=s&&(null!=a.from&&(t={line:s,ch:a.from}),null!=a.to&&(e={line:s,ch:a.to}))}}return{from:t,to:e}};var _r,jr,Gr,Yr,Zr="CodeMirror-temp-"+Math.floor(16777215*Math.random()).toString(16),Jr=0,Xr={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},qr=0;for(var Qr in V)V.propertyIsEnumerable(Qr)&&!Kr.propertyIsEnumerable(Qr)&&(Kr[Qr]=V[Qr]);return Kr}function e(t){return"string"==typeof t?j[t]:t}function n(t,n,r,i,o){function l(n){n=e(n);var r=n[t];if(null!=r&&i(r))return!0;if(n.nofallthrough)return o&&o(),!0;var a=n.fallthrough;if(null==a)return!1;if("[object Array]"!=Object.prototype.toString.call(a))return l(a);for(var s=0,u=a.length;u>s;++s)if(l(a[s]))return!0;return!1}return n&&l(n)?!0:l(r)}function r(t){var e=ae[S(t,"keyCode")];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function i(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var n={};for(var r in e){var i=e[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function o(t,e,n){return t.startState?t.startState(e,n):!0}function l(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8}function a(t,e,n,r){this.from=t,this.to=e,this.style=n,this.marker=r}function s(t){this.from=t,this.to=t,this.line=null}function u(t,e){this.styles=e||[t,null],this.text=t,this.height=1,this.marked=this.gutterMarker=this.className=this.bgClassName=this.handlers=null,this.stateAfter=this.parent=this.hidden=null}function f(t,e,n,r){for(var i=0,o=0,l=0;e>o;i+=2){var a=n[i],s=o+a.length;0==l?(s>t&&r.push(a.slice(t-o,Math.min(a.length,e-o)),n[i+1]),s>=t&&(l=1)):1==l&&(s>e?r.push(a.slice(0,e-o),n[i+1]):r.push(a,n[i+1])),o=s}}function h(t){this.lines=t,this.parent=null;for(var e=0,n=t.length,r=0;n>e;++e)t[e].parent=this,r+=t[e].height;this.height=r}function c(t){this.children=t;for(var e=0,n=0,r=0,i=t.length;i>r;++r){var o=t[r];e+=o.chunkSize(),n+=o.height,o.parent=this}this.size=e,this.height=n,this.parent=null}function d(t,e){for(;!t.lines;)for(var n=0;;++n){var r=t.children[n],i=r.chunkSize();if(i>e){t=r;break}e-=i}return t.lines[e]}function p(t){if(null==t.parent)return null;for(var e=t.parent,n=B(e.lines,t),r=e.parent;r;e=r,r=r.parent){var i=0;for(r.children.length;r.children[i]!=e;++i)n+=r.children[i].chunkSize()}return n}function g(t,e){var n=0;t:do{for(var r=0,i=t.children.length;i>r;++r){var o=t.children[r],l=o.height;if(l>e){t=o;continue t}e-=l,n+=o.chunkSize()}return n}while(!t.lines);for(var r=0,i=t.lines.length;i>r;++r){var a=t.lines[r],s=a.height;if(s>e)break;e-=s}return n+r}function m(t,e){var n=0;t:do{for(var r=0,i=t.children.length;i>r;++r){var o=t.children[r],l=o.chunkSize();if(l>e){t=o;continue t}e-=l,n+=o.height}return n}while(!t.lines);for(var r=0;e>r;++r)n+=t.lines[r].height;return n}function v(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}function y(){k(this)}function x(t){return t.stop||(t.stop=y),t}function b(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function C(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function k(t){b(t),C(t)}function w(t){return t.target||t.srcElement}function M(t){return t.which?t.which:1&t.button?1:2&t.button?3:4&t.button?2:void 0}function S(t,e){var n=t.override&&t.override.hasOwnProperty(e);return n?t.override[e]:t[e]}function A(t,e,n,r){if("function"==typeof t.addEventListener){if(t.addEventListener(e,n,!1),r)return function(){t.removeEventListener(e,n,!1)}}else{var i=function(t){n(t||window.event)};if(t.attachEvent("on"+e,i),r)return function(){t.detachEvent("on"+e,i)}}}function L(){this.id=null}function T(t,e,n){null==e&&(e=t.search(/[^\s\u00a0]/),-1==e&&(e=t.length));for(var r=0,i=0;e>r;++r)"	"==t.charAt(r)?i+=n-i%n:++i;return i}function E(t){return t.currentStyle?t.currentStyle:window.getComputedStyle(t,null)}function z(t,e){for(var n=t.ownerDocument.body,r=0,i=0,o=!1,l=t;l;l=l.offsetParent){var a=l.offsetLeft,s=l.offsetTop;l==n?(r+=Math.abs(a),i+=Math.abs(s)):(r+=a,i+=s),e&&"fixed"==E(l).position&&(o=!0)}for(var u=e&&!o?null:n,l=t.parentNode;l!=u;l=l.parentNode)null!=l.scrollLeft&&(r-=l.scrollLeft,i-=l.scrollTop);return{left:r,top:i}}function D(t){return t.textContent||t.innerText||t.nodeValue||""}function W(t){K?(t.selectionStart=0,t.selectionEnd=t.value.length):t.select()}function H(t,e){return t.line==e.line&&t.ch==e.ch}function N(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function R(t){return{line:t.line,ch:t.ch}}function O(t){return ie.textContent=t,ie.innerHTML}function I(t,e){if(!e)return 0;if(!t)return e.length;for(var n=t.length,r=e.length;n>=0&&r>=0&&t.charAt(n)==e.charAt(r);--n,--r);return r+1}function B(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;r>n;++n)if(t[n]==e)return n;return-1}function P(t){return/\w/.test(t)||t.toUpperCase()!=t.toLowerCase()}t.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null};var K=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),U=K||/Mac/.test(navigator.platform),$=(/Win/.test(navigator.platform),t.modes={}),F=t.mimeModes={};t.defineMode=function(e,n){if(t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2){n.dependencies=[];for(var r=2;r<arguments.length;++r)n.dependencies.push(arguments[r])}$[e]=n},t.defineMIME=function(t,e){F[t]=e},t.resolveMode=function(e){if("string"==typeof e&&F.hasOwnProperty(e))e=F[e];else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,n){var n=t.resolveMode(n),r=$[n.name];return r?r(e,n):t.getMode(e,"text/plain")},t.listModes=function(){var t=[];for(var e in $)$.propertyIsEnumerable(e)&&t.push(e);return t},t.listMIMEs=function(){var t=[];for(var e in F)F.propertyIsEnumerable(e)&&t.push({mime:e,mode:F[e]});return t};var V=t.extensions={};t.defineExtension=function(t,e){V[t]=e};var _=t.commands={selectAll:function(t){t.setSelection({line:0,ch:0},{line:t.lineCount()-1})},killLine:function(t){var e=t.getCursor(!0),n=t.getCursor(!1),r=!H(e,n);r||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,r?n:{line:e.line}):t.replaceRange("",e,{line:e.line+1,ch:0})},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",{line:e,ch:0},{line:e})},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.setCursor(0,0,!0)},goDocEnd:function(t){t.setSelection({line:t.lineCount()-1},null,!0)},goLineStart:function(t){t.setCursor(t.getCursor().line,0,!0)},goLineStartSmart:function(t){var e=t.getCursor(),n=t.getLine(e.line),r=Math.max(0,n.search(/\S/));t.setCursor(e.line,e.ch<=r&&e.ch?0:r,!0)},goLineEnd:function(t){t.setSelection({line:t.getCursor().line},null,!0)},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goWordRight:function(t){t.moveH(1,"word")},delCharLeft:function(t){t.deleteH(-1,"char")},delCharRight:function(t){t.deleteH(1,"char")},delWordLeft:function(t){t.deleteH(-1,"word")},delWordRight:function(t){t.deleteH(1,"word")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("	","end")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("	","end")},transposeChars:function(t){var e=t.getCursor(),n=t.getLine(e.line);e.ch>0&&e.ch<n.length-1&&t.replaceRange(n.charAt(e.ch)+n.charAt(e.ch-1),{line:e.line,ch:e.ch-1},{line:e.line,ch:e.ch+1})},newlineAndIndent:function(t){t.replaceSelection("\n","end"),t.indentLine(t.getCursor().line)},toggleOverwrite:function(t){t.toggleOverwrite()}},j=t.keyMap={};j.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},j.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},j.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},j["default"]=U?j.macDefault:j.pcDefault,j.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},t.fromTextArea=function(e,n){function r(){e.value=a.getValue()}function i(){r(),e.form.submit=l,e.form.submit(),e.form.submit=i}if(n||(n={}),n.value=e.value,!n.tabindex&&e.tabindex&&(n.tabindex=e.tabindex),null==n.autofocus&&null!=e.getAttribute("autofocus")&&(n.autofocus=!0),e.form){var o=A(e.form,"submit",r,!0);if("function"==typeof e.form.submit){var l=e.form.submit;e.form.submit=i}}e.style.display="none";var a=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},n);return a.save=r,a.getTextArea=function(){return e},a.toTextArea=function(){r(),e.parentNode.removeChild(a.getWrapperElement()),e.style.display="",e.form&&(o(),"function"==typeof e.form.submit&&(e.form.submit=l))},a},t.copyState=i,t.startState=o,l.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else var n=e&&(t.test?t.test(e):t(e));return n?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return T(this.string,this.start,this.tabSize)},indentation:function(){return T(this.string,null,this.tabSize)},match:function(t,e,n){function r(t){return n?t.toLowerCase():t}if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&e!==!1&&(this.pos+=i[0].length),i}return r(this.string).indexOf(r(t),this.pos)==this.pos?(e!==!1&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},t.StringStream=l,a.prototype={attach:function(t){this.marker.set.push(t)},detach:function(t){var e=B(this.marker.set,t);e>-1&&this.marker.set.splice(e,1)},split:function(t,e){if(this.to<=t&&null!=this.to)return null;var n=this.from<t||null==this.from?null:this.from-t+e,r=null==this.to?null:this.to-t+e;return new a(n,r,this.style,this.marker)},dup:function(){return new a(null,null,this.style,this.marker)},clipTo:function(t,e,n,r,i){t&&r>this.from&&(r<this.to||null==this.to)?this.from=null:null!=this.from&&this.from>=e&&(this.from=Math.max(r,this.from)+i),n&&(e<this.to||null==this.to)&&(e>this.from||null==this.from)?this.to=null:null!=this.to&&this.to>e&&(this.to=r<this.to?this.to+i:e)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(t){return this.marker==t.marker}},s.prototype={attach:function(t){this.line=t},detach:function(t){this.line==t&&(this.line=null)},split:function(t,e){return t<this.from?(this.from=this.to=this.from-t+e,this):void 0},isDead:function(){return this.from>this.to},clipTo:function(t,e,n,r,i){(t||e<this.from)&&(n||r>this.to)?(this.from=0,this.to=-1):this.from>e&&(this.from=this.to=Math.max(r,this.from)+i)},sameSet:function(){return!1},find:function(){return this.line&&this.line.parent?{line:p(this.line),ch:this.from}:null},clear:function(){if(this.line){var t=B(this.line.marked,this);-1!=t&&this.line.marked.splice(t,1),this.line=null}}},u.inheritMarks=function(t,e){var n=new u(t),r=e&&e.marked;if(r)for(var i=0;i<r.length;++i)if(null==r[i].to&&r[i].style){var o=n.marked||(n.marked=[]),l=r[i],a=l.dup();o.push(a),a.attach(n)}return n},u.prototype={replace:function(t,e,n){var r=[],i=this.marked,o=null==e?this.text.length:e;if(f(0,t,this.styles,r),n&&r.push(n,null),f(o,this.text.length,this.styles,r),this.styles=r,this.text=this.text.slice(0,t)+n+this.text.slice(o),this.stateAfter=null,i)for(var l=n.length-(o-t),a=0;a<i.length;++a){var s=i[a];s.clipTo(null==t,t||0,null==e,o,l),s.isDead()&&(s.detach(this),i.splice(a--,1))}},split:function(t,e){var n=[e,null],r=this.marked;f(t,this.text.length,this.styles,n);var i=new u(e+this.text.slice(t),n);if(r)for(var o=0;o<r.length;++o){var l=r[o],a=l.split(t,e.length);a&&(i.marked||(i.marked=[]),i.marked.push(a),a.attach(i),a==l&&r.splice(o--,1))}return i},append:function(t){var e=this.text.length,n=t.marked,r=this.marked;if(this.text+=t.text,f(0,t.text.length,t.styles,this.styles),r)for(var i=0;i<r.length;++i)null==r[i].to&&(r[i].to=e);if(n&&n.length){r||(this.marked=r=[]);t:for(var i=0;i<n.length;++i){var o=n[i];if(!o.from)for(var l=0;l<r.length;++l){var a=r[l];if(a.to==e&&a.sameSet(o)){a.to=null==o.to?null:o.to+e,a.isDead()&&(a.detach(this),n.splice(i--,1));continue t}}r.push(o),o.attach(this),o.from+=e,null!=o.to&&(o.to+=e)}}},fixMarkEnds:function(t){var e=this.marked,n=t.marked;if(e)for(var r=0;r<e.length;++r){var i=e[r],o=null==i.to;if(o&&n)for(var l=0;l<n.length;++l)if(n[l].sameSet(i)){o=!1;break}o&&(i.to=this.text.length)}},fixMarkStarts:function(){var t=this.marked;if(t)for(var e=0;e<t.length;++e)null==t[e].from&&(t[e].from=0)},addMark:function(t){t.attach(this),null==this.marked&&(this.marked=[]),this.marked.push(t),this.marked.sort(function(t,e){return(t.from||0)-(e.from||0)})},highlight:function(t,e,n){var r,i=new l(this.text,n),o=this.styles,a=0,s=!1,u=o[0];for(""==this.text&&t.blankLine&&t.blankLine(e);!i.eol();){var f=t.token(i,e),h=this.text.slice(i.start,i.pos);if(i.start=i.pos,a&&o[a-1]==f?o[a-2]+=h:h&&(!s&&(o[a+1]!=f||a&&o[a-2]!=r)&&(s=!0),o[a++]=h,o[a++]=f,r=u,u=o[a]),i.pos>5e3){o[a++]=this.text.slice(i.pos),o[a++]=null;break}}return o.length!=a&&(o.length=a,s=!0),a&&o[a-2]!=r&&(s=!0),s||(o.length<5&&this.text.length<10?null:!1)},getTokenAt:function(t,e,n){for(var r=this.text,i=new l(r);i.pos<n&&!i.eol();){i.start=i.pos;var o=t.token(i,e)}return{start:i.start,end:i.pos,string:i.current(),className:o||null,state:e}},indentation:function(t){return T(this.text,null,t)},getHTML:function(t,e,n,r){function i(e,n){if(e){if(s&&Z&&" "==e.charAt(0)&&(e=" "+e.slice(1)),s=!1,-1==e.indexOf("	")){u+=e.length;var r=O(e)}else for(var r="",i=0;;){var o=e.indexOf("	",i);if(-1==o){r+=O(e.slice(i)),u+=e.length-i;break}u+=o-i;var l=t(u);r+=O(e.slice(i,o))+l.html,u+=l.width,i=o+1}n?a.push('<span class="',n,'">',r,"</span>"):a.push(r)}}function o(t){return t?"cm-"+t.replace(/ +/g," cm-"):null}function l(){for(var t;w<g.length&&((t=g[w]).from==y||null==t.from);)null!=t.style&&k.push(t),++w;C=w<g.length?g[w].from:1/0;for(var e=0;e<k.length;++e){var n=k[e].to||1/0;n==y?k.splice(e--,1):C=Math.min(n,C)}}var a=[],s=!0,u=0,f=i;if(null!=e){var h=0,c='<span id="'+n+'">';f=function(t,n){var o=t.length;if(e>=h&&h+o>e){e>h&&(i(t.slice(0,e-h),n),r&&a.push("<wbr>")),a.push(c);var l=e-h;i(window.opera?t.slice(l,l+1):t.slice(l),n),a.push("</span>"),window.opera&&i(t.slice(l+1),n),e--,h+=o}else h+=o,i(t,n),h==e&&h==m?a.push(c+" </span>"):h>e+10&&/\s/.test(t)&&(f=function(){})}}var d=this.styles,p=this.text,g=this.marked,m=p.length;if(p||null!=e)if(g&&g.length)for(var v,y=0,x=0,b="",C=g[0].from||0,k=[],w=0;m>y;){C==y&&l();for(var M=Math.min(m,C);;){if(b){for(var S=y+b.length,A=v,L=0;L<k.length;++L)A=(A?A+" ":"")+k[L].style;if(f(S>M?b.slice(0,M-y):b,A),S>=M){b=b.slice(M-y),y=M;break}y=S}b=d[x++],v=o(d[x++])}}else for(var x=0,T=0;m>T;x+=2){var E=d[x],v=d[x+1],z=E.length;T+z>m&&(E=E.slice(0,m-T)),T+=z,f(E,o(v))}else f(" ");return a.join("")},cleanUp:function(){if(this.parent=null,this.marked)for(var t=0,e=this.marked.length;e>t;++t)this.marked[t].detach(this)}},h.prototype={chunkSize:function(){return this.lines.length},remove:function(t,e,n){for(var r=t,i=t+e;i>r;++r){var o=this.lines[r];if(this.height-=o.height,o.cleanUp(),o.handlers)for(var l=0;l<o.handlers.length;++l)n.push(o.handlers[l])}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertHeight:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var r=0,i=e.length;i>r;++r)e[r].parent=this},iterN:function(t,e,n){for(var r=t+e;r>t;++t)if(n(this.lines[t]))return!0}},c.prototype={chunkSize:function(){return this.size},remove:function(t,e,n){this.size-=e;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(o>t){var l=Math.min(e,o-t),a=i.height;if(i.remove(t,l,n),this.height-=a-i.height,o==l&&(this.children.splice(r--,1),i.parent=null),0==(e-=l))break;t=0}else t-=o}if(this.size-e<25){var s=[];this.collapse(s),this.children=[new h(s)],this.children[0].parent=this}},collapse:function(t){for(var e=0,n=this.children.length;n>e;++e)this.children[e].collapse(t)},insert:function(t,e){for(var n=0,r=0,i=e.length;i>r;++r)n+=e[r].height;this.insertHeight(t,e,n)},insertHeight:function(t,e,n){this.size+=e.length,this.height+=n;for(var r=0,i=this.children.length;i>r;++r){var o=this.children[r],l=o.chunkSize();if(l>=t){if(o.insertHeight(t,e,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var a=o.lines.splice(o.lines.length-25,25),s=new h(a);o.height-=s.height,this.children.splice(r+1,0,s),s.parent=this}this.maybeSpill()}break}t-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new c(e);if(t.parent){t.size-=n.size,t.height-=n.height;var r=B(t.parent.children,t);t.parent.children.splice(r+1,0,n)}else{var i=new c(t.children);i.parent=t,t.children=[i,n],t=i}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iter:function(t,e,n){this.iterN(t,e-t,n)},iterN:function(t,e,n){for(var r=0,i=this.children.length;i>r;++r){var o=this.children[r],l=o.chunkSize();if(l>t){var a=Math.min(e,l-t);if(o.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=l}}},v.prototype={addChange:function(t,e,n){this.undone.length=0;var r=+new Date,i=this.done[this.done.length-1],o=i&&i[i.length-1],l=r-this.time;if(this.compound&&i&&!this.closed)i.push({start:t,added:e,old:n});else if(l>400||!o||this.closed||o.start>t+n.length||o.start+o.added<t)this.done.push([{start:t,added:e,old:n}]),this.closed=!1;else{for(var a=Math.max(0,o.start-t),s=Math.max(0,t+n.length-(o.start+o.added)),u=a;u>0;--u)o.old.unshift(n[u-1]);for(var u=s;u>0;--u)o.old.push(n[n.length-u]);a&&(o.start=t),o.added+=e-(n.length-a-s)}this.time=r},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}},t.e_stop=k,t.e_preventDefault=b,t.e_stopPropagation=C,t.connect=A,L.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}};var G=t.Pass={toString:function(){return"CodeMirror.Pass"}},Y=/gecko\/\d{7}/i.test(navigator.userAgent),Z=/MSIE \d/.test(navigator.userAgent),J=/MSIE [1-8]\b/.test(navigator.userAgent),X=Z&&5==document.documentMode,q=/WebKit\//.test(navigator.userAgent),Q=/Chrome\//.test(navigator.userAgent),te=/Apple Computer/.test(navigator.vendor),ee=/KHTML\//.test(navigator.userAgent),ne=function(){if(J)return!1;var t=document.createElement("div");return"draggable"in t||"dragDrop"in t}(),re=(function(){var t=document.createElement("textarea");return t.value="foo\nbar",t.value.indexOf("\r")>-1?"\r\n":"\n"}(),/^$/);Y?re=/$'/:te?re=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:Q&&(re=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/),null!=document.documentElement.getBoundingClientRect&&(z=function(t,e){try{var n=t.getBoundingClientRect();n={top:n.top,left:n.left}}catch(r){n={top:0,left:0}}if(!e)if(null==window.pageYOffset){var i=document.documentElement||document.body.parentNode;null==i.scrollTop&&(i=document.body),n.top+=i.scrollTop,n.left+=i.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n});var ie=document.createElement("pre");"\na"==O("a")?O=function(t){return ie.textContent=t,ie.innerHTML.slice(1)}:"	"!=O("	")&&(O=function(t){return ie.innerHTML="",ie.appendChild(document.createTextNode(t)),ie.innerHTML}),t.htmlEscape=O;var oe=3!="\n\nb".split(/\n/).length?function(t){for(var e,n=0,r=[];(e=t.indexOf("\n",n))>-1;)r.push(t.slice(n,"\r"==t.charAt(e-1)?e-1:e)),n=e+1;return r.push(t.slice(n)),r}:function(t){return t.split(/\r?\n/)};t.splitLines=oe;var le=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(e){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(n){}return e&&e.parentElement()==t?0!=e.compareEndPoints("StartToEnd",e):!1};t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var ae={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return t.keyNames=ae,function(){for(var t=0;10>t;t++)ae[t+48]=String(t);for(var t=65;90>=t;t++)ae[t]=String.fromCharCode(t);for(var t=1;12>=t;t++)ae[t+111]=ae[t+63235]="F"+t}(),t}();CodeMirror.defineMode("python",function(t,e){function n(t){return new RegExp("^(("+t.join(")|(")+"))\\b")}function r(t,e){if(t.sol()){var n=e.scopes[0].offset;if(t.eatSpace()){var r=t.indentation();return r>n?w="indent":n>r&&(w="dedent"),null}n>0&&l(t,e)}if(t.eatSpace())return null;var o=t.peek();if("#"===o)return t.skipToEnd(),"comment";if(t.match(/^[0-9\.]/,!1)){var a=!1;if(t.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(a=!0),t.match(/^\d+\.\d*/)&&(a=!0),t.match(/^\.\d+/)&&(a=!0),a)return t.eat(/J/i),"number";var m=!1;if(t.match(/^0x[0-9a-f]+/i)&&(m=!0),t.match(/^0b[01]+/i)&&(m=!0),t.match(/^0o[0-7]+/i)&&(m=!0),t.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(t.eat(/J/i),m=!0),t.match(/^0(?![\dx])/i)&&(m=!0),m)return t.eat(/L/i),"number"}return t.match(b)?(e.tokenize=i(t.current()),e.tokenize(t,e)):t.match(d)||t.match(c)?null:t.match(h)||t.match(u)||t.match(g)?"operator":t.match(f)?null:t.match(C)?"keyword":t.match(k)?"builtin":t.match(p)?"variable":(t.next(),s)}function i(t){function n(n,l){for(;!n.eol();)if(n.eatWhile(/[^'"\\]/),n.eat("\\")){if(n.next(),i&&n.eol())return o}else{if(n.match(t))return l.tokenize=r,o;n.eat(/['"]/)}if(i){if(e.singleLineStringErrors)return s;l.tokenize=r}return o}for(;"rub".indexOf(t.charAt(0).toLowerCase())>=0;)t=t.substr(1);var i=1==t.length,o="string";return n.isString=!0,n}function o(e,n,r){r=r||"py";var i=0;if("py"===r){if("py"!==n.scopes[0].type)return void(n.scopes[0].offset=e.indentation());for(var o=0;o<n.scopes.length;++o)if("py"===n.scopes[o].type){i=n.scopes[o].offset+t.indentUnit;break}}else i=e.column()+e.current().length;n.scopes.unshift({offset:i,type:r})}function l(t,e,n){if(n=n||"py",1!=e.scopes.length){if("py"===e.scopes[0].type){for(var r=t.indentation(),i=-1,o=0;o<e.scopes.length;++o)if(r===e.scopes[o].offset){i=o;break}if(-1===i)return!0;for(;e.scopes[0].offset!==r;)e.scopes.shift();return!1}return"py"===n?(e.scopes[0].offset=t.indentation(),!1):e.scopes[0].type!=n?!0:(e.scopes.shift(),!1)}}function a(t,e){w=null;var n=e.tokenize(t,e),r=t.current();if("."===r)return n=t.match(p,!1)?null:s,null===n&&"meta"===e.lastToken&&(n="meta"),n;if("@"===r)return t.match(p,!1)?"meta":s;"variable"!==n&&"builtin"!==n||"meta"!==e.lastToken||(n="meta"),("pass"===r||"return"===r)&&(e.dedent+=1),"lambda"===r&&(e.lambda=!0),(":"===r&&!e.lambda&&"py"==e.scopes[0].type||"indent"===w)&&o(t,e);var i="[({".indexOf(r);return-1!==i&&o(t,e,"])}".slice(i,i+1)),"dedent"===w&&l(t,e)?s:(i="])}".indexOf(r),-1!==i&&l(t,e,r)?s:(e.dedent>0&&t.eol()&&"py"==e.scopes[0].type&&(e.scopes.length>1&&e.scopes.shift(),e.dedent-=1),n))}var s="error",u=e.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),f=e.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),h=e.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),c=e.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),d=e.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),p=e.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),g=n(["and","or","not","is","in"]),m=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],v=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],y={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},x={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};if(void 0!=e.extra_keywords&&(m=m.concat(e.extra_keywords)),void 0!=e.extra_builtins&&(v=v.concat(e.extra_builtins)),e.version&&3===parseInt(e.version,10)){m=m.concat(x.keywords),v=v.concat(x.builtins);var b=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{m=m.concat(y.keywords),v=v.concat(y.builtins);var b=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var C=n(m),k=n(v),w=null,M={startState:function(t){return{tokenize:r,scopes:[{offset:t||0,type:"py"}],lastToken:null,lambda:!1,dedent:0}},token:function(t,e){var n=a(t,e);return e.lastToken=n,t.eol()&&e.lambda&&(e.lambda=!1),n},indent:function(t){return t.tokenize!=r?t.tokenize.isString?CodeMirror.Pass:0:t.scopes[0].offset},lineComment:"#",fold:"indent"};return M}),CodeMirror.defineMIME("text/x-python","python");var words=function(t){return t.split(" ")};CodeMirror.defineMIME("text/x-cython",{name:"python",extra_keywords:words("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")}),$(document).ready(function(){function t(t){function e(t){var e=document.createElement("DIV");return e.innerHTML=t,e.textContent||e.innerText||""}function n(t){if(void 0===Sk.builtinFiles||void 0===Sk.builtinFiles.files[t])throw"File not found: '"+t+"'";return Sk.builtinFiles.files[t]}var r=e($("#code"+t).text());$("#code"+t).text(r);var i=CodeMirror.fromTextArea(document.getElementById("code"+t),{parserfile:["parsepython.js"],autofocus:!0,theme:"monokai",lineNumbers:!0,textWrapping:!1,indentUnit:4,height:"160px",fontSize:"9pt",autoMatchParens:!0,parserConfig:{pythonVersion:2,strictErrors:!0},onKeyEvent:function(e,r){if(13===r.keyCode&&"keydown"===r.type){var i=$("#edoutput"+t),o=function(t){i.text(i.text()+t)};Sk.configure({output:o,read:n}),r.ctrlKey?(r.stop(),$("#edoutput"+t).text(""),Sk.canvas="mycanvas"+t,Sk.pre="edoutput"+t,Sk.importMainWithBody("<stdin>",!1,e.getValue())):r.shiftKey&&(r.stop(),Sk.importMainWithBody("<stdin>",!1,e.selection()))}}});$("#btn"+t).click(function(){var e=$("#edoutput"+t),r=function(t){e.text(e.text()+t)};$("#edoutput"+t).text(""),$("#mycanvas"+ +t).hide(),Sk.configure({output:r,read:n}),Sk.canvas="mycanvas"+t,Sk.pre="edoutput"+t,Sk.importMainWithBody("<stdin>",!1,i.getValue())}),$("#clearoutput"+t).click(function(){$("#edoutput"+t).text(""),$("#mycanvas"+t).hide()}),i.focus()}function e(){for(var e=0,n=$(".codeWrapper").length;n>e;e++)t(e)}writeTextBoxes().done(e)});